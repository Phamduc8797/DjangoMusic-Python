{% extends "homes/layout.html" %}
{% load static %}
{% load humanize %}
{% block title %}
    {{ object.name }} | {{ block.super }}
{% endblock title %}
{% block content %}
<div class="container">
    <div class="row">
        {% if form.errors %}
            <div class="alert alert-danger">
                <strong>Wrong something!!</strong>
            </div>
        {% endif %}
        {% if messages %}
            {% for message in messages %}
            <div class="alert alert-success">
                <strong>{{ message }}</strong>
            </div>
            {% endfor %}
        {% endif %}
    </div>
    <div class="row" style="background-color:#DDDDDD;border-radius: 20px;">
        <div class="col-md-4">
            <img src="/{{ object.photo }}"
            alt="" class="img-rounded img-responsive" />
        </div>
        <div class="col-md-8">
            <blockquote>
                <h2><span class="glyphicon glyphicon-music"></span> {{ object.name }}</h2>
                <p>Singer: {{ object.singer }}</p>
                <p>Category: {{ object.category }}</p>
                <p>Description: {% if description %} {{ object.category }} {% else %} N/A {% endif %}</p>
            </blockquote>
        </div>
    </div>
    <div class="row">
        <audio src="/{{ object.urlsong }}" controls style="width:100%" id="controllsong" controlsList="nodownload"></audio>
    </div>
    <div class="row">
        <div class="col-md-6 col-md-offset-4">
            <span class="buttonreqeat">
                <button class="btn" title="Repeat on" onclick="repeaton();">
                    <i class="glyphicon glyphicon-repeat"></i>                
                </button>
            </span>
            <span class="buttonplay">
                <button class="btn" title="Play" onclick="playsong();">
                    <i class="glyphicon glyphicon-play"></i>                
                </button>
            </span>
            <button class="btn" title="Stop" onclick="stopsong();">
                <i class="glyphicon glyphicon-stop"></i>
            </button>
        </div>
    </div>
    <hr>
    <div class="row">
        <div class="col-sm-12">  
            <h2>Lyrics <span style="font-size:14px;color:#337ab7;cursor: pointer;" data-toggle="collapse" data-target="#demo">New lyric</span></h2>
            <div id="demo" class="collapse">                 
                <form action="{% url 'create-lyric' object.id %}" method="POST">
                    {% csrf_token %}
                    <textarea class="form-control" id="content" name="content" placeholder="Content" rows="5" required></textarea>
                    <button class="btn pull-right" type="submit">Add</button>
                </form>                   
            </div>
        </div><!-- /col-sm-12 -->
    </div>
    <div class="row">
        <div class="col-sm-12">
            <ul class="nav nav-tabs">
                {% if lyricfirst %}
                <li class="active"><a data-toggle="tab" href="#{{ lyricfirst.id }}">{{ lyricfirst.user.username }}</a></li>
                {% endif %}
                {% for lyric in lyrics %}
                <li><a data-toggle="tab" href="#{{ lyric.id }}">{{ lyric.user.username }}</a></li>
                {% endfor %}
            </ul>
            <div class="tab-content">
                <div id="{{ lyricfirst.id }}" class="tab-pane fade in active">
                <p>{{ lyricfirst.content|linebreaks }}</p>
                </div>
                {% for lyric in lyrics %}
                <div id="{{ lyric.id }}" class="tab-pane">
                    <p>{{ lyric.content|linebreaks }}</p>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
    <hr>
    <div class="row">
            <div class="col-sm-12">  
                <h2>Comment <span style="font-size:14px;color:#337ab7;cursor: pointer;" data-toggle="collapse" data-target="#newcomment">New comment</span></h2>
                <div id="newcomment" class="collapse">                 
                    <form action="{% url 'create-comment' object.id %}" method="POST">
                        {% csrf_token %}
                        <textarea class="form-control" id="content" name="content" placeholder="Content" rows="5" required></textarea>
                        <button class="btn pull-right" type="submit">Add</button>
                    </form>                   
                </div>                
            </div><!-- /col-sm-12 -->
        </div>
    {% for comment in comments %}
        <div class="row">
            <div class="col-sm-1">
                <div class="thumbnail">
                    <img class="img-responsive user-photo" src="https://ssl.gstatic.com/accounts/ui/avatar_2x.png">
                </div><!-- /thumbnail -->
            </div><!-- /col-sm-1 -->
            <div class="col-sm-11">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <strong>{{ comment.user.username }}</strong> <span class="text-muted">commented {{ comment.updated|naturaltime }}</span>
                    </div>
                    <div class="panel-body">
                        {{ comment.content }}
                    </div><!-- /panel-body -->
                </div><!-- /panel panel-default -->
            </div><!-- /col-sm-5 -->
        </div><!-- /row -->
    {% endfor %}
</div>
{% endblock content %}